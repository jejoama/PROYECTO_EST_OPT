---
title: "Proyecto"
output: html_document
date: "2025-12-01"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# EXTRACCIÓN DEL DATATSET

```{r}
train <- read.csv("stock_returns_train_2.csv")

# Serie temporal
train_serie <- ts(train)
summary(train_serie)

plot(train_serie)
```

#DIVISIÓN TRAIN vs. TEST

```{r}
filas_train <- nrow(train)

#Hemos pensando en dividirlo en 80% train vs 20% Test

#Entrenamiento --> 96 primeros
Xtrain <- window(train_serie, start=1, end=floor(0.8*filas_train))

# Validación: 24 ultimos
Xtest <- window(train_serie, start=floor(0.8*filas_train)+1, end=filas_train)

```



PASO 2
Nos pide tanto la varianza como el valor esperado de neustra estimación. Haciendolo de modo que en nuestro tiempo t, cojamos todo lo del pasado --> t-1... --> para ello Modelo ARIMA
```{r}
library(forecast)  
library(FinTS)    

# Modelo arima para el activo 1: x1
for (i in 1:ncol(train_serie)){
  x_train <- Xtrain[,i]  
  
  fit_arima <- auto.arima(x_train, seasonal = FALSE)

  #Ljung-Box sobre los residuos - (autocorrelación hasta lag=20)
  Box_test <- Box.test(residuals(fit_arima), lag=20, type="Ljung-Box")
  
  
  #ARCH sobre los residuos ---
  arch_test <- ArchTest(residuals(fit_arima), lags=20)
  print(Box_test)
  print(arch_test)
  print("--------------")
}




```
Todos los activos en el Box-Ljung test muestran p‑valores > 0.05, por tanto, no hay autocorrelación significativa en los residuos.

Todos los activos en el ARCH test muestran p‑valores > 0.5, por tanto,  no hay evidencia de heterocedasticidad condicional. Esto nos indica que la varianza es estable.





